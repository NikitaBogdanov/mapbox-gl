{"version":3,"sources":["components/addPopup/index.js","reducers/map/constants.js","pages/App.js","img/mrk.png","reducers/map/actions.js","logo.svg","pages/App2.js","reducers/map/index.js","reducers/index.js","index.js"],"names":["AddPopup","onChange","onAdd","className","e","target","value","onClick","ADD_MARKER","App","dispatch","useDispatch","payload","useSelector","state","map","geoData","useState","lng","lat","zoom","mapSettings","isOpen","title","description","addInfo","setAddInfo","setMap","mapContainer","useRef","useEffect","mapboxgl","accessToken","Map","container","current","style","center","on","onLoad","onMapClick","event","preventDefault","lngLat","labelLayerId","layers","getStyle","i","length","type","layout","id","addLayer","loadImage","error","image","addImage","addSource","popup","Popup","closeButton","closeOnClick","getCanvas","cursor","coordinates","features","geometry","slice","properties","Math","abs","setLngLat","setHTML","addTo","remove","ref","field","data","getSource","setData","_data","localStorage","setItem","JSON","stringify","src","logo","alt","onKeyPress","console","log","key","href","rel","initialState","combineReducers","action","getItem","parse","store","createStore","ReactDOM","render","basename","path","component","App2","document","getElementById"],"mappings":"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","file":"static/js/main.f23852df.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nfunction AddPopup({onChange, onAdd}) {\r\n    return (\r\n        <div className=\"popup-bg\">\r\n            <div className=\"popup-container\">\r\n                <input\r\n                    onChange={(e) => onChange(e.target.value, \"title\")}\r\n                    className=\"popup-title\"\r\n                />\r\n                <input\r\n                    onChange={(e) => onChange(e.target.value, \"description\")}\r\n                    className=\"popup-description\"\r\n                />\r\n                <button onClick={onAdd}>Add</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AddPopup;\r\n","export const ADD_MARKER = 'add_marker';","import React, {useState, useEffect, useRef} from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport '../site.css';\nimport mrk from '../img/mrk.png'\nimport AddPopup from '../components/addPopup'\nimport {addMarker} from  '../reducers/map/actions'\n\nimport mapboxgl from 'mapbox-gl';\n\nfunction App() {\n    const dispatch = useDispatch();\n    const {payload} = useSelector(state => state.map.geoData);\n    const [mapSettings, setMapSettings] = useState({\n        lng: -77.020945,\n        lat: 38.878241,\n        zoom: 17,\n    });\n    const [addInfo, setAddInfo] = useState({\n        isOpen: false,\n        title: '',\n        description: '',\n        lng: 0,\n        lat: 0,\n    });\n\n    const [map, setMap] = useState(null);\n    const mapContainer = useRef(null);\n\n    useEffect(() => {\n        mapboxgl.accessToken = 'pk.eyJ1IjoibmlraXRhYm9nZGFub3YiLCJhIjoiY2tpZnd2N3ZhMDI2aDJ1bzMwcXdlaTF6cyJ9.TG6WMDhBBdEZ02AnCstRrw';\n        const map = new mapboxgl.Map({\n            container: mapContainer.current,\n            style: 'mapbox://styles/mapbox/streets-v11',\n            center: [mapSettings.lng, mapSettings.lat],\n            zoom: mapSettings.zoom,\n        });\n\n        map.on('load', () => { onLoad(map) });\n        map.on('click', 'buildings', e => { onMapClick(e, map) });\n    }, []);\n\n\n    const onMapClick = (event, map) => {\n        event.preventDefault();\n        setAddInfo({\n            isOpen: true,\n            title: '',\n            description: '',\n            lng: event.lngLat.lng,\n            lat: event.lngLat.lat,\n        });\n\n        setMap(map);\n    };\n\n    const onAdd = () => {\n        if (map === null) return;\n\n        map.getSource('places').setData({\n                'type': 'FeatureCollection',\n                'features': [...map.getSource('places')._data.features,\n                    {\n                        'type': 'Feature',\n                        'properties': {\n                            'title': addInfo.title,\n                            'description': addInfo.description,\n                        },\n                        'geometry': {\n                            'type': 'Point',\n                            'coordinates': [addInfo.lng, addInfo.lat]\n                        }\n                    }\n                ]\n            }\n        );\n\n        setAddInfo({\n            isOpen: false,\n            title: '',\n            description: '',\n            lng: 0,\n            lat: 0,\n        });\n\n        dispatch(addMarker(map.getSource('places')._data.features));\n        localStorage.setItem(\"geoData\", JSON.stringify(map.getSource('places')._data.features));\n    };\n\n    const onLoad = (map) => {\n        var layers = map.getStyle().layers;\n\n        var labelLayerId;\n        for (var i = 0; i < layers.length; i++) {\n            if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {\n                labelLayerId = layers[i].id;\n                break;\n            }\n        }\n\n        map.addLayer(\n            {\n                'id': '3d-buildings',\n                'source': 'composite',\n                'source-layer': 'building',\n                'filter': ['==', 'extrude', 'true'],\n                'type': 'fill-extrusion',\n                'minzoom': 15,\n                'paint': {\n                    'fill-extrusion-color': '#aaa',\n                    'fill-extrusion-height': [\n                        'interpolate',\n                        ['linear'],\n                        ['zoom'],\n                        15,\n                        0,\n                        15.05,\n                        ['get', 'height']\n                    ],\n                    'fill-extrusion-base': [\n                        'interpolate',\n                        ['linear'],\n                        ['zoom'],\n                        15,\n                        0,\n                        15.05,\n                        ['get', 'min_height']\n                    ],\n                    'fill-extrusion-opacity': 0.6\n                }\n            },\n            labelLayerId\n        );\n\n        map.addLayer(\n            {\n                'id': 'buildings',\n                'source': 'composite',\n                'source-layer': 'building',\n                'filter': ['==', 'extrude', 'true'],\n                'type': 'fill-extrusion',\n                'minzoom': 15,\n            },\n            labelLayerId\n        );\n\n        map.loadImage(mrk, function (error, image) {\n            map.addImage('custom-marker', image);\n\n            map.addSource('places', {\n                'type': 'geojson',\n                'data': {\n                    'type': 'FeatureCollection',\n                    'features': payload\n                }\n            });\n\n            map.addLayer({\n                'id': 'places',\n                'type': 'symbol',\n                'source': 'places',\n                'layout': {\n                    'icon-image': 'custom-marker',\n                    'icon-allow-overlap': true\n                }\n            });\n        });\n\n        var popup = new mapboxgl.Popup({\n            closeButton: false,\n            closeOnClick: false\n        });\n\n        map.on('mouseenter', 'places', function (e) {\n            map.getCanvas().style.cursor = 'pointer';\n\n            var coordinates = e.features[0].geometry.coordinates.slice();\n            var description = e.features[0].properties.description;\n            var title = e.features[0].properties.title;\n\n            while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n                coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n            }\n\n            popup.setLngLat(coordinates).setHTML(`<p class=\"tooltip-title\">${title}<p/><p class=\"tooltip-description\">${description}<p/>`).addTo(map);\n        });\n\n        map.on('mouseleave', 'places', function () {\n            map.getCanvas().style.cursor = '';\n            popup.remove();\n        });\n    };\n\n    const handleOnChange = (value, field) => {\n        setAddInfo({\n            ...addInfo,\n            [field]: value\n        })\n    };\n\n    return (\n        <div className=\"App\">\n            <div ref={mapContainer} className=\"mapContainer\"/>\n            {addInfo.isOpen && <AddPopup onChange={handleOnChange} onAdd={onAdd}/>}\n        </div>\n    );\n}\n\nexport default App;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAaCAYAAABCfffNAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEAAACxABrSO9dQAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xMkMEa+wAAADESURBVEhLvc1BDsMwCETR3P/SLkYCOfBtSNVm8VA0gfE1xvg7DNFcjWbegKGykrWUyKxgqDplnR2BoWocu2IPQ2WHh2NX7GGo7LAoUMVeCtx6tDl2trvZS4FbDzfHqrGXAtc4Vo29FLjGcWtHYOiqgvX/bkdg6GJJRSbB8CYWncgkGN6sBfZNZO5geBPLiMwTDJNYGsk8wTCJpSuZFQyTWLySWcEQxXIjs4IhssKHD0wYbj0sNxhuvfLI9MojX8Dwt8b1Add1/VdzVL1BAAAAAElFTkSuQmCC\"","import {\r\n    ADD_MARKER,\r\n} from './constants';\r\n\r\nexport const addMarker = (data) => {\r\n    return {\r\n        type: ADD_MARKER,\r\n        payload: data,\r\n    }\r\n};","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import logo from '../logo.svg';\nimport '../site.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <p>\n          Welcome back!\n        </p>\n        <input onKeyPress={(e)=>{console.log(e.key)}}></input>\n        <a\n          className=\"App-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Learn React\n        </a>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import {\r\n    ADD_MARKER,\r\n} from './constants';\r\n\r\nconst initialState = {\r\n    geoData : {\r\n        payload: [],\r\n    },\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case ADD_MARKER:\r\n            return  { ...state, geoData: { payload : action.payload }};\r\n        default:\r\n        {\r\n            return state\r\n        }\r\n    }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport map from './map';\r\n\r\nexport default combineReducers({\r\n    map,\r\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\nimport {createStore} from 'redux';\nimport './index.css';\nimport App from './pages/App';\nimport App2 from './pages/App2';\nimport combineReducers from './reducers';\n\n\nconst initialState = localStorage.getItem(\"geoData\") ? {\n    map: {\n        geoData: {\n            payload: JSON.parse(localStorage.getItem(\"geoData\")),\n        }\n    },\n} : {};\n\nexport const store = createStore(combineReducers, initialState);\n\nReactDOM.render(\n    <Provider store={store}>\n        <label>TEST</label>\n        <Router basename=\"/\">\n            <Route path=\"/\" component={App}/>\n            <Route path=\"/welcome\" component={App2}/>\n        </Router>\n    </Provider>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}