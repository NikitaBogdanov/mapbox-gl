(this["webpackJsonpmapbox-gl-app"]=this["webpackJsonpmapbox-gl-app"]||[]).push([[0],{26:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t),a.d(t,"store",(function(){return C}));var o=a(2),n=a(0),c=a(14),r=a.n(c),l=a(13),s=a(28),i=a(3),p=a(9),u=(a(39),a(16)),d=a(10),g=a(29),b=a(19);a(26);var j=function(e){var t=e.onChange,a=e.onAdd;return Object(o.jsx)("div",{className:"popup-bg",children:Object(o.jsxs)("div",{className:"popup-container",children:[Object(o.jsx)("input",{onChange:function(e){return t(e.target.value,"title")},className:"popup-title"}),Object(o.jsx)("input",{onChange:function(e){return t(e.target.value,"description")},className:"popup-description"}),Object(o.jsx)("button",{onClick:a,children:"Add"})]})})},m="add_marker",f=a(18),A=a.n(f);var O=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.map.geoData})).payload,a=Object(n.useState)({lng:-77.020945,lat:38.878241,zoom:17}),c=Object(b.a)(a,2),r=c[0],s=(c[1],Object(n.useState)({isOpen:!1,title:"",description:"",lng:0,lat:0})),i=Object(b.a)(s,2),p=i[0],f=i[1],O=Object(n.useState)(null),h=Object(b.a)(O,2),y=h[0],x=h[1],v=Object(n.useRef)(null);Object(n.useEffect)((function(){A.a.accessToken="pk.eyJ1IjoibmlraXRhYm9nZGFub3YiLCJhIjoiY2tpZnd2N3ZhMDI2aDJ1bzMwcXdlaTF6cyJ9.TG6WMDhBBdEZ02AnCstRrw";var e=new A.a.Map({container:v.current,style:"mapbox://styles/mapbox/streets-v11",center:[r.lng,r.lat],zoom:r.zoom});e.on("load",(function(){C(e)})),e.on("click","buildings",(function(t){S(t,e)}))}),[]);var S=function(e,t){e.preventDefault(),f({isOpen:!0,title:"",description:"",lng:e.lngLat.lng,lat:e.lngLat.lat}),x(t)},C=function(e){for(var a,o=e.getStyle().layers,n=0;n<o.length;n++)if("symbol"===o[n].type&&o[n].layout["text-field"]){a=o[n].id;break}e.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}},a),e.addLayer({id:"buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15},a),e.loadImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAaCAYAAABCfffNAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEAAACxABrSO9dQAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xMkMEa+wAAADESURBVEhLvc1BDsMwCETR3P/SLkYCOfBtSNVm8VA0gfE1xvg7DNFcjWbegKGykrWUyKxgqDplnR2BoWocu2IPQ2WHh2NX7GGo7LAoUMVeCtx6tDl2trvZS4FbDzfHqrGXAtc4Vo29FLjGcWtHYOiqgvX/bkdg6GJJRSbB8CYWncgkGN6sBfZNZO5geBPLiMwTDJNYGsk8wTCJpSuZFQyTWLySWcEQxXIjs4IhssKHD0wYbj0sNxhuvfLI9MojX8Dwt8b1Add1/VdzVL1BAAAAAElFTkSuQmCC",(function(a,o){e.addImage("custom-marker",o),e.addSource("places",{type:"geojson",data:{type:"FeatureCollection",features:t}}),e.addLayer({id:"places",type:"symbol",source:"places",layout:{"icon-image":"custom-marker","icon-allow-overlap":!0}})}));var c=new A.a.Popup({closeButton:!1,closeOnClick:!1});e.on("mouseenter","places",(function(t){e.getCanvas().style.cursor="pointer";for(var a=t.features[0].geometry.coordinates.slice(),o=t.features[0].properties.description,n=t.features[0].properties.title;Math.abs(t.lngLat.lng-a[0])>180;)a[0]+=t.lngLat.lng>a[0]?360:-360;c.setLngLat(a).setHTML('<p class="tooltip-title">'.concat(n,'<p/><p class="tooltip-description">').concat(o,"<p/>")).addTo(e)})),e.on("mouseleave","places",(function(){e.getCanvas().style.cursor="",c.remove()}))};return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("div",{ref:v,className:"mapContainer"}),p.isOpen&&Object(o.jsx)(j,{onChange:function(e,t){f(Object(d.a)(Object(d.a)({},p),{},Object(u.a)({},t,e)))},onAdd:function(){var t;null!==y&&(y.getSource("places").setData({type:"FeatureCollection",features:[].concat(Object(g.a)(y.getSource("places")._data.features),[{type:"Feature",properties:{title:p.title,description:p.description},geometry:{type:"Point",coordinates:[p.lng,p.lat]}}])}),f({isOpen:!1,title:"",description:"",lng:0,lat:0}),e((t=y.getSource("places")._data.features,{type:m,payload:t})),localStorage.setItem("geoData",JSON.stringify(y.getSource("places")._data.features)))}})]})},h=a.p+"static/media/logo.6ce24c58.svg";var y=function(){return Object(o.jsx)("div",{className:"App",children:Object(o.jsxs)("header",{className:"App-header",children:[Object(o.jsx)("img",{src:h,className:"App-logo",alt:"logo"}),Object(o.jsx)("p",{children:"Welcome back!"}),Object(o.jsx)("input",{onKeyPress:function(e){console.log(e.key)}}),Object(o.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},x={geoData:{payload:[]}},v=Object(p.b)({map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(d.a)(Object(d.a)({},e),{},{geoData:{payload:t.payload}});default:return e}}}),S=localStorage.getItem("geoData")?{map:{geoData:{payload:JSON.parse(localStorage.getItem("geoData"))}}}:{},C=Object(p.c)(v,S);r.a.render(Object(o.jsxs)(l.a,{store:C,children:[Object(o.jsx)("label",{children:"TEST"}),Object(o.jsxs)(s.a,{basename:"/",children:[Object(o.jsx)(i.a,{path:"/",component:O}),Object(o.jsx)(i.a,{path:"/welcome",component:y})]})]}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.f23852df.chunk.js.map